FROM alpine:3.18
#RUN apk add --no-cache mariadb mariadb-client openrc && openrc && touch /run/openrc/softlevel
RUN env && sleep infinitly
ARG DB_NAME
#
## enable remote connections to mariadb from any IP
#RUN sed -i 's|skip-networking|#skip-networking|g' /etc/my.cnf.d/mariadb-server.cnf
#RUN sed -i 's|#bind-address=0.0.0.0|bind-address=0.0.0.0|g' /etc/my.cnf.d/mariadb-server.cnf
#
#RUN echo "DB_NAME=$DB_NAME\nDB_USER=$DB_USER\nDB_PASSWORD=$DB_PASSWORD"
#RUN rc-service mariadb setup && \
#	rc-service mariadb start && \
#	mysql -e "CREATE DATABASE $DB_NAME;" && \
#	mysql -e "CREATE USER '$DB_USER'@'%' IDENTIFIED BY '$DB_PASSWORD';" && \
#	mysql -e "GRANT ALL PRIVILEGES ON $DB_NAME.* TO '$DB_USER'@'%' WITH GRANT OPTION;" && \
#	mysql -e "FLUSH PRIVILEGES;"
#
#ADD --chown=root:root tools/bootstrap.sh /tmp/bootstrap.sh
#
## make entry point script executable
#RUN chmod +x /tmp/bootstrap.sh
#
## run script
#CMD ["/tmp/bootstrap.sh"]
